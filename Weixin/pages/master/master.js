(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/master/master"],{"0b02":function(e,n,t){"use strict";(function(e){var a=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("2eee")),o=a(t("c973")),i=t("2fa4"),u=t("024e"),s={data:function(){return{btnLoading:!1}},methods:{handleLogin:function(){var n=this;e.vibrateShort(),n.btnLoading=!0,e.login({success:function(t){return(0,o.default)(r.default.mark((function a(){var o;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,i.wechatLogin)({code:t.code});case 3:o=a.sent,(0,u.setToken)(o),n.$parent.isLogin=!0,setTimeout((function(){n.$parent.loadingPersonal()}),10),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0),e.showToast({icon:"none",duration:6e3,title:a.t0});case 13:return a.prev=13,n.btnLoading=!1,a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[0,9,13,16]])})))()}})}}};n.default=s}).call(this,t("543d")["default"])},"1f95":function(e,n,t){"use strict";t.r(n);var a=t("5549"),r=t("ee47");for(var o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(o);t("6986");var i=t("f0c5"),u=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);n["default"]=u.exports},"2b78":function(e,n,t){"use strict";(function(e){var a=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("9e95")),o=a(t("9542")),i=t("024e"),u={computed:{menu:function(){return o.default.menu},env:function(){return r.default}},methods:{toFunctionPage:function(n){(0,i.getToken)()?e.navigateTo({url:n}):e.reLaunch({url:"/pages/master/master?swiperIndex=1"})},toCustomPage:function(n){(0,i.getToken)()?((0,i.setChat)(n),e.navigateTo({url:"/pages/dialogue/customDialogueView"})):e.reLaunch({url:"/pages/master/master?swiperIndex=1"})}}};n.default=u}).call(this,t("543d")["default"])},"2dba":function(e,n,t){"use strict";t.r(n);var a=t("8dd3"),r=t("f218");for(var o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(o);t("a3bc");var i=t("f0c5"),u=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);n["default"]=u.exports},"44ed":function(e,n,t){},4568:function(e,n,t){"use strict";(function(e,a){var r=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("2eee")),i=r(t("448a")),u=r(t("c973")),s=t("6855"),c=r(t("9e95")),f=t("024e"),l=t("2cfb"),d=r(t("d208")),p=t("8b57"),h=t("3ae9"),v={components:{DisconnectComponent:function(){t.e("wxcomponents/components/disconnectComponent").then(function(){return resolve(t("ae94"))}.bind(null,t)).catch(t.oe)},LoadingDataComponent:d.default,EmptyComponent:function(){t.e("wxcomponents/components/emptyComponent").then(function(){return resolve(t("6cd7"))}.bind(null,t)).catch(t.oe)}},computed:{env:function(){return c.default}},data:function(){return{isFlushed:!1,userInfo:{},userInfoForm:{userName:""},userData:{list:[],isPublic:0,current:1},publicData:{list:[],isPublic:1,current:1},active:0,isAppreciate:!0}},methods:{conversionImage:h.conversionImage,refreshAppreciate:function(){var e=this.$refs.appreciateFlowRef;e&&(this.publicData.list=[],this.publicData.current=1,this.getPublicOps(),e.refresh())},refreshCreation:function(){var e=this.$refs.creationFlowRef;e&&(this.userData.list=[],this.userData.current=1,this.getUserOps(),e.refresh())},onLoadShow:function(){this.getUserInfo(),this.getUserOps()},toDrawingDetail:function(n){e.navigateTo({url:"/pages/drawing/drawingResultView?drawingId="+n.value.drawingId})},getUserOps:function(){var e=(0,u.default)(o.default.mark((function e(){var n,t,a,r,u;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=this.userData,t=n.current,a=n.isPublic,e.next=4,this.getOps(t,a);case 4:r=e.sent,r.length>0&&((u=this.userData.list).push.apply(u,(0,i.default)(r)),this.userData.current=t+1),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),getPublicOps:function(){var e=(0,u.default)(o.default.mark((function e(){var n,t,a,r,u;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=this.publicData,t=n.current,a=n.isPublic,e.next=4,this.getOps(t,a);case 4:r=e.sent,r.length>0&&((u=this.publicData.list).push.apply(u,(0,i.default)(r)),this.publicData.current=t+1),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),getOps:function(){var n=(0,u.default)(o.default.mark((function n(t,a){var r,i,u=this;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,this.isFlushed=!0,n.next=4,(0,p.getDrawingOpsResult)(t,a);case 4:return r=n.sent,i=r.records,i.length>0&&i.forEach((function(e){e.image=c.default.imageBaseUrl+e.image;var n=e.value.prompt.toString(),t=n.split(/[,，]/);Array.isArray(t)&&(e.value.prompt=t.slice(0,4))})),n.abrupt("return",i);case 10:n.prev=10,n.t0=n["catch"](0),e.showToast({icon:"none",duration:4e3,title:n.t0});case 13:return n.prev=13,setTimeout((function(){u.isFlushed=!1}),1e3),n.finish(13);case 16:case"end":return n.stop()}}),n,this,[[0,10,13,16]])})));return function(e,t){return n.apply(this,arguments)}}(),toLayoutPage:function(){e.navigateTo({url:"/pages/layout/layoutView"})},onChangeTabs:function(e){this.isAppreciate&&1===e.detail.index&&(this.isAppreciate=!0,this.getPublicOps())},signIn:function(){var n=(0,u.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.showLoading(),n.next=4,(0,l.userSignInReward)();case 4:n.sent,e.hideLoading(),e.showToast({icon:"none",duration:3e3,title:"签到成功"}),e.$emit("master_userInfo"),n.next=15;break;case 10:n.prev=10,n.t0=n["catch"](0),e.hideLoading(),console.log(n.t0),e.showToast({icon:"none",duration:6e3,title:n.t0});case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}(),getUserInfo:function(){var e=(0,u.default)(o.default.mark((function e(){var n,t;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$parent,e.prev=1,n.openShowAnimation(),e.next=5,(0,s.getCurrentUserInfo)();case 5:t=e.sent,t&&(this.userInfo=t,(0,f.setUser)(this.userInfo),this.userInfoForm=JSON.parse(JSON.stringify(this.userInfo))),n.isConnection=!0,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0),n.isConnection=!1;case 14:return e.prev=14,setTimeout((function(){n.closeShowAnimation()}),200),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,10,14,17]])})));return function(){return e.apply(this,arguments)}}(),refreshUserInfo:function(){var e=(0,u.default)(o.default.mark((function e(){var n,t;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$parent,e.prev=1,n.isConnection=!0,e.next=5,(0,s.getCurrentUserInfo)();case 5:t=e.sent,t&&(this.userInfo=t,(0,f.setUser)(this.userInfo),this.userInfoForm=JSON.parse(JSON.stringify(this.userInfo))),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log(e.t0),n.isConnection=!1;case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),onNickName:function(e){this.userInfoForm.userName=e.detail.value},uploadAvatar:function(){var n=(0,u.default)(o.default.mark((function n(t){var r,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=this,i=c.default.baseUrl+"/user/upload/avatar",e.showLoading({title:"正在上传",mask:!0}),a.uploadFile({url:i,filePath:t.detail.avatarUrl,name:"avatar",header:{token:(0,f.getToken)()},success:function(){r.getUserInfo(),e.hideLoading(),e.showToast({title:"上传头像成功",icon:"none",duration:2e3})},fail:function(n){console.log(n),e.hideLoading(),e.showToast({title:"上传头像失败,请稍后重试",icon:"none",duration:2e3})}});case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),uploadName:function(){var n=(0,u.default)(o.default.mark((function n(){var t;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=this.userInfoForm.userName,t.length>0){n.next=4;break}return e.showToast({title:"昵称不能为空",icon:"none",duration:2e3}),n.abrupt("return");case 4:return n.prev=4,e.showLoading({title:"正在修改 ing~",mask:!0}),n.next=8,(0,s.uploadName)(t);case 8:return n.next=10,this.getUserInfo();case 10:e.hideLoading(),e.showToast({title:"修改昵称成功",icon:"none",duration:2e3}),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](4),e.showToast({title:"昵称不合法!",icon:"none",duration:2e3});case 17:case"end":return n.stop()}}),n,this,[[4,14]])})));return function(){return n.apply(this,arguments)}}(),copyOpenId:function(){var n=(0,u.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.setClipboardData({data:this.userInfo.openId,success:function(n){e.showToast({title:"已复制粘贴板",icon:"none",duration:2e3})}});case 1:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),onImageLoad:function(e){this.imageList[e].defaultUrl=""}}};n.default=v}).call(this,t("543d")["default"],t("bc2e")["default"])},"4a1b":function(e,n,t){"use strict";t.r(n);var a=t("d7fe"),r=t("7c4e");for(var o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(o);t("c07f");var i=t("f0c5"),u=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"23b45043",null,!1,a["a"],void 0);n["default"]=u.exports},"4a8f":function(e,n,t){"use strict";var a=t("8309"),r=t.n(a);r.a},5549:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var a=function(){var e=this,n=e.$createElement,t=(e._self._c,e.conversionTime(e.announcement.createdTime));e._isMounted||(e.e0=function(e){this.isAnnouncement=!1},e.e1=function(n){e.isAnnouncement=!1}),e.$mp.data=Object.assign({},{$root:{m0:t}})},r=[]},6986:function(e,n,t){"use strict";var a=t("44ed"),r=t.n(a);r.a},"7c4e":function(e,n,t){"use strict";t.r(n);var a=t("0b02"),r=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=r.a},"82a1":function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return a}));var a={customWaterfallsFlow:function(){return t.e("modules/custom-waterfalls-flow/components/custom-waterfalls-flow/custom-waterfalls-flow").then(t.bind(null,"6e15"))},uniPopup:function(){return t.e("modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,"bcb2"))}},r=function(){var e=this,n=e.$createElement,t=(e._self._c,e.userInfo.avatar?e.conversionImage(e.userInfo.avatar):null),a=e.userData.list.length,r=!e.isFlushed&&0===e.userData.list.length,o=e.publicData.list.length,i=!e.isFlushed&&0===e.publicData.list.length,u=e.userInfoForm.avatar?e.conversionImage(e.userInfoForm.avatar):null;e._isMounted||(e.e0=this.$parent.watchVideo,e.e1=function(e){return this.$refs.personalInfoPopup.open("center")},e.e2=function(e){return this.$refs.personalInfoPopup.close()}),e.$mp.data=Object.assign({},{$root:{m0:t,g0:a,g1:r,g2:o,g3:i,m1:u}})},o=[]},8309:function(e,n,t){},"8dd3":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},r=[]},a3bc:function(e,n,t){"use strict";var a=t("a959"),r=t.n(a);r.a},a718:function(e,n,t){},a959:function(e,n,t){},afa3:function(e,n,t){"use strict";(function(e,n){var a=t("4ea4");t("4943");a(t("66fd"));var r=a(t("1f95"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},b229:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},r=[]},b3bf:function(e,n,t){},c07f:function(e,n,t){"use strict";var a=t("b3bf"),r=t.n(a);r.a},c2b9:function(e,n,t){"use strict";t.r(n);var a=t("f75c"),r=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=r.a},cc4f:function(e,n,t){"use strict";var a=t("a718"),r=t.n(a);r.a},d208:function(e,n,t){"use strict";t.r(n);var a=t("b229"),r=t("c2b9");for(var o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(o);t("cc4f");var i=t("f0c5"),u=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);n["default"]=u.exports},d7fe:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},r=[]},e058:function(e,n,t){"use strict";(function(e,a){var r=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("2eee")),i=r(t("c973")),u=r(t("2dba")),s=r(t("4a1b")),c=r(t("ed9a")),f=t("024e"),l=r(t("9e95")),d=t("2cfb"),p=t("6a276"),h=t("b6c9"),v=null,m={components:{DisconnectComponent:function(){t.e("wxcomponents/components/disconnectComponent").then(function(){return resolve(t("ae94"))}.bind(null,t)).catch(t.oe)},LoadingComponent:function(){t.e("wxcomponents/components/loadingComponent").then(function(){return resolve(t("10e5"))}.bind(null,t)).catch(t.oe)},PersonalView:c.default,LoginView:s.default,HomeView:u.default,MenuComponent:function(){Promise.all([t.e("common/vendor"),t.e("pages/master/components/menuComponent")]).then(function(){return resolve(t("ca54"))}.bind(null,t)).catch(t.oe)}},onLoad:function(n){var t=this.$refs.personalRef;n.swiperIndex&&(this.swiperIndex=n.swiperIndex),this.loadingPersonal(),e.$on("master_userInfo",(function(){t&&t.refreshUserInfo()})),e.$on("master_creation",(function(){t&&t.refreshCreation()})),e.$on("master_appreciate",(function(){t&&t.refreshAppreciate()})),this.adLoad()},onUnload:function(){e.$off("master_userInfo"),e.$off("master_appreciate"),e.$off("master_creation"),v&&v.destroy()},data:function(){return{swiperIndex:0,isLogin:!1,announcement:{},isAnnouncement:!1,isConnection:!0}},created:function(){this.handleIsLogin(),this.getAnnouncement()},methods:{conversionTime:h.conversionTime,loadingPersonal:function(){(0,f.getToken)()&&this.$refs.personalRef.onLoadShow()},adLoad:function(){var n=this,t=l.default.motivationalAdvertisingId;a.createRewardedVideoAd&&(v=a.createRewardedVideoAd({adUnitId:t}),v.onError((function(e){console.log(e)})),v.onClose((function(t){if(t&&t.isEnded||void 0===t)try{(0,d.useVideoReward)();e.showToast({title:"奖励已发放",icon:"none"}),n.$refs.personalRef.getUserInfo()}catch(a){console.log(a),e.showToast({title:"获取奖励失败",icon:"none"})}else e.showToast({icon:"none",duration:3e3,title:"请重新观看视频获得奖励"})})))},watchVideo:function(){v&&v.show().catch((function(){v.load().then((function(){v.show()}))}))},handleIsLogin:function(){return this.isLogin=(0,f.getToken)(),this.isLogin},changeSwiper:function(n){e.vibrateShort(),this.swiperIndex=n.detail.current},getAnnouncement:function(){var e=(0,i.default)(o.default.mark((function e(){var n,t,a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.getAnnouncementData)();case 3:n=e.sent,n&&(t=n.logotypeId,a=(0,f.getAnnouncement)(),a&&t===a.logotypeId||(this.announcement=n,(0,f.setAnnouncement)(n),this.isAnnouncement=!0)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log("获取公告失败");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),openShowAnimation:function(){this.$refs.loadingRef.openShow()},closeShowAnimation:function(){this.$refs.loadingRef.closeShow()}}};n.default=m}).call(this,t("543d")["default"],t("bc2e")["default"])},ed9a:function(e,n,t){"use strict";t.r(n);var a=t("82a1"),r=t("fcba");for(var o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(o);t("4a8f");var i=t("f0c5"),u=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);n["default"]=u.exports},ee47:function(e,n,t){"use strict";t.r(n);var a=t("e058"),r=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=r.a},f218:function(e,n,t){"use strict";t.r(n);var a=t("2b78"),r=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=r.a},f75c:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={data:function(){return{}}}},fcba:function(e,n,t){"use strict";t.r(n);var a=t("4568"),r=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=r.a}},[["afa3","common/runtime","common/vendor"]]]);
