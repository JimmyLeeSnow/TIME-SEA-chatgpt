(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/drawing/dallTextImageView"],{"17e7":function(e,t,n){},"457c":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},i=[]},"74ab":function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("48aa");a(n("66fd"));var i=a(n("f50d"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},7746:function(e,t,n){"use strict";var a=n("17e7"),i=n.n(a);i.a},b29f:function(e,t,n){"use strict";n.r(t);var a=n("dc7f"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=i.a},dc7f:function(e,t,n){"use strict";(function(e){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("2eee")),r=a(n("c973")),o=a(n("0ad6")),c=n("a6cf"),s={components:{GenerateLoadingComponent:function(){n.e("pages/drawing/components/generateLoadingComponent").then(function(){return resolve(n("98fd"))}.bind(null,n)).catch(n.oe)}},data:function(){return{form:{prompt:"",size:"512x512",location:0},size:[{size:"512x512",isSelected:!0,text:"标准分辨率"},{size:"1024x1024",isSelected:!1,text:"高分辨率"}],timer:void 0}},methods:{handleSize:function(e){this.size.forEach((function(e){return e.isSelected=!1})),this.size[e].isSelected=!0,this.form.size=this.size[e].size},previousPage:function(){e.navigateBack()},stopTimer:function(){clearInterval(this.timer)},submit:function(){var t=(0,r.default)(i.default.mark((function t(){var n,a,s,u;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.form.prompt,n){t.next=4;break}return e.showToast({title:"请填写描述",icon:"none",duration:4e3}),t.abrupt("return");case 4:a=this,s=o.default.tmplIds,u=a.$refs.generateLoadingRef,e.requestSubscribeMessage({tmplIds:s,success:function(){var t=(0,r.default)(i.default.mark((function t(n){var r;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("accept"!==n[s[0]]){t.next=18;break}return e.showLoading({title:"正在加入队列...",mask:!0}),t.prev=2,t.next=5,(0,c.addGptDrawingTextTaskQueue)(a.form);case 5:r=t.sent,e.showToast({title:"提交成功",icon:"none",duration:2e3}),a.form.location=r.location,u.openShow(),a.timer=setInterval((function(){a.isDrawingSucceed(r.drawingId)}),5e3),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](2),e.hideLoading(),e.showToast({title:t.t0,icon:"none",duration:2e3});case 16:t.next=19;break;case 18:e.showModal({title:"订阅消息",content:"您当前拒绝接收作品消息通知，是否去开启?",confirmText:"开启授权",confirmColor:"#345391",cancelText:"仍然拒绝",cancelColor:"#999999",success:function(t){t.confirm&&e.openSetting({success:function(e){console.log(e)}})}});case 19:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),previewImage:function(t){e.previewImage({urls:[t]})},isDrawingSucceed:function(){var t=(0,r.default)(i.default.mark((function t(n){var a,r,o;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this,r=this.$refs.generateLoadingRef,t.prev=2,t.next=5,(0,c.isDrawingSucceed)(n);case 5:o=t.sent,o&&(r.closeShow(),a.stopTimer(),e.navigateTo({url:"/pages/drawing/drawingResultView?drawingId="+n})),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](2),e.showToast({title:t.t0,icon:"none",duration:2e3}),this.stopTimer(),setTimeout((function(){e.navigateBack()}),3e3);case 14:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},onUnload:function(){clearInterval(this.timer),e.$emit("master_userInfo")}};t.default=s}).call(this,n("543d")["default"])},f50d:function(e,t,n){"use strict";n.r(t);var a=n("457c"),i=n("b29f");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("7746");var o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=c.exports}},[["74ab","common/runtime","common/vendor"]]]);