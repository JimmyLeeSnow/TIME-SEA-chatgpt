(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/drawing/sdTextImageView"],{"76e3":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this.$createElement;this._self._c},a=[]},"7b20":function(e,t,n){"use strict";var i=n("f9a6"),a=n.n(i);a.a},"7ef8":function(e,t,n){"use strict";n.r(t);var i=n("ab74"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=a.a},"98ea":function(e,t,n){"use strict";(function(e,t){var i=n("4ea4");n("4943");i(n("66fd"));var a=i(n("be62"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},ab74:function(e,t,n){"use strict";(function(e){var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("2eee")),r=i(n("c973")),o=i(n("9e95")),s=n("8b57"),c={components:{LoadingComponent:function(){n.e("wxcomponents/components/loadingComponent").then(function(){return resolve(n("10e5"))}.bind(null,n)).catch(n.oe)},GenerateLoadingComponent:function(){n.e("pages/drawing/components/generateLoadingComponent").then(function(){return resolve(n("8058"))}.bind(null,n)).catch(n.oe)}},data:function(){return{form:{prompt:"",width:512,height:512,seed:0,restore_faces:0,modelName:"",location:0,negative_prompt:""},msg:"正在检查绘图服务运行状态",size:[{width:512,height:512,isSelected:!0,text:"标准分辨率"},{width:1024,height:1024,isSelected:!1,text:"高分辨率"}],random:[{seed:0,isSelected:!1,text:"不随机"},{seed:50,isSelected:!1,text:"随机"},{seed:123,isSelected:!0,text:"任意"}],model:[]}},created:function(){var e=this;this.model=o.default.sdModels,this.model.forEach((function(t){t.isSelected&&(e.form.modelName=t.modelName)}))},methods:{previousPage:function(){e.navigateBack()},stopTimer:function(){clearInterval(this.timer)},deleted:function(){this.form.images=""},submit:function(){var t=(0,r.default)(a.default.mark((function t(){var n,i,c,u;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.form.prompt,n){t.next=4;break}return e.showToast({title:"请填写描述",icon:"none",duration:4e3}),t.abrupt("return");case 4:i=this,c=o.default.tmplIds,u=i.$refs.generateLoadingRef,e.requestSubscribeMessage({tmplIds:c,success:function(){var t=(0,r.default)(a.default.mark((function t(n){var r;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("accept"!==n[c[0]]){t.next=18;break}return e.showLoading({title:"正在加入队列...",mask:!0}),t.prev=2,t.next=5,(0,s.addSdDrawingTextTaskQueue)(i.form);case 5:r=t.sent,e.showToast({title:"提交成功",icon:"none",duration:2e3}),i.form.location=r.location,u.openShow(),i.timer=setInterval((function(){i.isDrawingSucceed(r.drawingId)}),5e3),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](2),e.hideLoading(),e.showToast({title:"操作繁忙 请稍后试试",icon:"none",duration:2e3});case 16:t.next=19;break;case 18:console.log("放弃绘图");case 19:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleRandom:function(e){this.random.forEach((function(e){return e.isSelected=!1})),this.random[e].isSelected=!0,this.form.seed=this.random[e].seed},handleSize:function(e){this.size.forEach((function(e){return e.isSelected=!1})),this.size[e].isSelected=!0,this.form.height=this.size[e].height,this.form.width=this.size[e].width},handleModel:function(e){this.model.forEach((function(e){return e.isSelected=!1})),this.model[e].isSelected=!0,this.form.modelName=this.model[e].modelName},imageCacheCallback:function(e){var t=e.detail.file;this.form.images=t.url},previewImage:function(t){e.previewImage({urls:[t]})},examineServer:function(){var t=(0,r.default)(a.default.mark((function t(){var n,i;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.$refs.loadingRef,t.prev=1,n.openShow(),t.next=5,(0,s.sdConnectivity)(0);case 5:if(i=t.sent,i){t.next=10;break}return this.msg="请联系小程序管理员开启绘图服务",setTimeout((function(){e.navigateBack()}),3e3),t.abrupt("return");case 10:n.closeShow(),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](1),this.msg=t.t0,setTimeout((function(){e.navigateBack()}),3e3);case 17:case"end":return t.stop()}}),t,this,[[1,13]])})));return function(){return t.apply(this,arguments)}}(),isDrawingSucceed:function(){var t=(0,r.default)(a.default.mark((function t(n){var i,r,o;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=this,r=this.$refs.generateLoadingRef,t.next=4,(0,s.isDrawingSucceed)(n);case 4:o=t.sent,o&&(r.closeShow(),i.stopTimer(),e.navigateTo({url:"/pages/drawing/drawingResultView?drawingId="+n}));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},onUnload:function(){e.$emit("master_userInfo")},beforeDestroy:function(){clearInterval(this.timer)},onLoad:function(){this.examineServer()}};t.default=c}).call(this,n("543d")["default"])},be62:function(e,t,n){"use strict";n.r(t);var i=n("76e3"),a=n("7ef8");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("7b20");var o=n("f0c5"),s=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=s.exports},f9a6:function(e,t,n){}},[["98ea","common/runtime","common/vendor"]]]);